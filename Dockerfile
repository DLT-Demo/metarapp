FROM registry.access.redhat.com/jboss-eap-6/eap64-openshift  

ENV DB_SERVICE_PREFIX_MAPPING=metarapp-mysql=DB
ENV DB_JNDI=java:jboss/datasources/MySQLDS
ENV DB_USERNAME=metarapp
ENV DB_PASSWORD=metarapp
ENV DB_DATABASE=metarapp
ENV TX_DATABASE_PREFIX_MAPPING=metarapp-mysql=DB
ENV DB_MIN_POOL_SIZE=
ENV DB_MAX_POOL_SIZE=
ENV DB_TX_ISOLATION=
ENV OPENSHIFT_KUBE_PING_LABELS=application=metarapp
ENV OPENSHIFT_KUBE_PING_NAMESPACE=rick
ENV HTTPS_KEYSTORE_DIR=/etc/eap-secret-volume
ENV HTTPS_KEYSTORE=keystore.jks
ENV HTTPS_NAME=
ENV HTTPS_PASSWORD=
ENV HORNETQ_CLUSTER_PASSWORD=EDrGd1HT
ENV HORNETQ_QUEUES=
ENV HORNETQ_TOPICS=
ENV JGROUPS_ENCRYPT_SECRET=eap-app-secret
ENV JGROUPS_ENCRYPT_KEYSTORE_DIR=/etc/jgroups-encrypt-secret-volume
ENV JGROUPS_ENCRYPT_KEYSTORE=jgroups.jceks
ENV JGROUPS_ENCRYPT_NAME=
ENV JGROUPS_ENCRYPT_PASSWORD=
ENV JGROUPS_CLUSTER_PASSWORD=MUtwn8Kt
ENV KUBERNETES_SERVICE_HOST=172.30.0.1
ENV KUBERNETES_PORT_443_TCP_PROTO=tcp
ENV KUBERNETES_SERVICE_PORT=443
ENV KUBERNETES_PORT_53_UDP_PORT=53
ENV PHPCALC_PORT_8080_TCP_ADDR=172.30.220.237
ENV METARAPP_MYSQL_PORT_3306_TCP_PROTO=tcp
ENV PHPCALC_PORT_8080_TCP_PORT=8080
ENV METARAPP_SERVICE_PORT=8080
ENV KUBERNETES_SERVICE_PORT_HTTPS=443
ENV KUBERNETES_SERVICE_PORT_DNS_TCP=53
ENV KUBERNETES_PORT_443_TCP_PORT=443
ENV KUBERNETES_PORT_53_UDP_PROTO=udp
ENV PHPCALC_SERVICE_HOST=172.30.220.237
ENV PHPCALC_PORT_8080_TCP=tcp://172.30.220.237:8080
ENV METARAPP_MYSQL_SERVICE_HOST=172.30.19.41
ENV METARAPP_MYSQL_PORT_3306_TCP_ADDR=172.30.19.41
ENV KUBERNETES_PORT_443_TCP=tcp://172.30.0.1:443
ENV PHPCALC_PORT=tcp://172.30.220.237:8080
ENV METARAPP_PORT_8080_TCP=tcp://172.30.58.239:8080
ENV METARAPP_PORT_8080_TCP_PROTO=tcp
ENV METARAPP_PORT_8080_TCP_PORT=8080
ENV SECURE_METARAPP_PORT_8443_TCP_PORT=8443
ENV KUBERNETES_SERVICE_PORT_DNS=53
ENV KUBERNETES_PORT=tcp://172.30.0.1:443
ENV KUBERNETES_PORT_53_UDP=udp://172.30.0.1:53
ENV KUBERNETES_PORT_53_TCP=tcp://172.30.0.1:53
ENV METARAPP_SERVICE_HOST=172.30.58.239
ENV METARAPP_MYSQL_PORT=tcp://172.30.19.41:3306
ENV KUBERNETES_PORT_53_TCP_PORT=53
ENV METARAPP_PORT_8080_TCP_ADDR=172.30.58.239
ENV SECURE_METARAPP_SERVICE_HOST=172.30.242.144
ENV SECURE_METARAPP_SERVICE_PORT=8443
ENV SECURE_METARAPP_PORT_8443_TCP_PROTO=tcp
ENV METARAPP_MYSQL_SERVICE_PORT=3306
ENV KUBERNETES_PORT_53_TCP_ADDR=172.30.0.1
ENV PHPCALC_SERVICE_PORT=8080
ENV PHPCALC_PORT_8080_TCP_PROTO=tcp
ENV METARAPP_PORT=tcp://172.30.58.239:8080
ENV SECURE_METARAPP_PORT=tcp://172.30.242.144:8443
ENV METARAPP_MYSQL_PORT_3306_TCP=tcp://172.30.19.41:3306
ENV METARAPP_MYSQL_PORT_3306_TCP_PORT=3306
ENV KUBERNETES_PORT_443_TCP_ADDR=172.30.0.1
ENV KUBERNETES_PORT_53_UDP_ADDR=172.30.0.1
ENV KUBERNETES_PORT_53_TCP_PROTO=tcp
ENV PHPCALC_SERVICE_PORT_8080_TCP=8080
ENV SECURE_METARAPP_PORT_8443_TCP=tcp://172.30.242.144:8443
ENV SECURE_METARAPP_PORT_8443_TCP_ADDR=172.30.242.144
ENV OPENSHIFT_BUILD_NAME=metarapp-3
ENV OPENSHIFT_BUILD_NAMESPACE=rick
ENV OPENSHIFT_BUILD_SOURCE=https://github.com/DLT-Solutions-JBoss/metarapp.git
ENV container=docker
ENV PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin
ENV JBOSS_IMAGE_NAME=jboss-eap-6/eap64-openshift
ENV JBOSS_IMAGE_VERSION=1.2
ENV JBOSS_IMAGE_RELEASE=26
ENV HOME=/home/jboss
ENV JAVA_TOOL_OPTIONS=-Duser.home=/home/jboss -Duser.name=jboss
ENV JAVA_HOME=/usr/lib/jvm/java-1.8.0
ENV JAVA_VENDOR=openjdk
ENV JAVA_VERSION=1.8.0
ENV LAUNCH_JBOSS_IN_BACKGROUND=true
ENV JBOSS_PRODUCT=eap
ENV JBOSS_EAP_VERSION=6.4.4.GA
ENV JBOSS_HOME=/opt/eap
ENV STI_BUILDER=jee
ENV JBOSS_MODULES_SYSTEM_PKGS=org.jboss.logmanager

ADD deployments/weather.war /opt/eap/standalone/deployments/  

EXPOSE 8080/tcp

EXPOSE 8443/tcp

EXPOSE 8778/tcp
USER 1000040000
WORKDIR /home/jboss

CMD ["/usr/local/s2i/run"]